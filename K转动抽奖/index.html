<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>转盘</title>
	<style>
		*{margin: 0;padding: 0;border: 0;}
		li{list-style-type:none;}
		#content{position: relative;width: 300px;height: 300px; float: left;}
		#content li,#begin{position: absolute;width: 100px;height: 100px; line-height: 100px;text-align: center; border: 1px solid #f60;}
		#content li.current{background: #090;}
		#begin{left: 100px;top: 100px;}
		#dashboard{ height:150px; line-height: 30px; overflow: hidden; float: left; width: 240px; margin: 100px;}
	</style>
<link rel="stylesheet" type="text/css" href="my.css">
</head>
<body>
	<ul id="content">
		<li style="left:0;top:0;">未中奖</li>
		<li style="left:100px;top:0;">一等奖</li>
		<li style="left:200px;top:0;">二等奖</li>
		<li style="left:200px;top:100px;">二等奖</li>
		<li style="left:200px;top:200px;">三等奖</li>
		<li style="left:100px;top:200px;">三等奖</li>
		<li style="left:0;top:200px;">三等奖</li>
		<li style="left:0;top:100px;">三等奖</li>
	</ul>
	<a href="javascript:void(0);" id="begin">抽奖</a>

	<marquee id="dashboard" scrollamount="1" direction="up" onmouseover="this.stop();" onmouseout="this.start();">
		<p>奸商抽中【三等奖】</p>
		<p>奸商抽中【三等奖】</p>
		<p>小伟抽中【二等奖】</p>
		<p>小伟抽中【二等奖】</p>
		<p>奸商抽中【三等奖】</p>
		<p>种地的抽中【一等奖】</p>
		<p>种菜的抽中【一等奖】</p>
		<p>奸商抽中【三等奖】</p>
		<p>大宇抽中【未中奖】</p>
		<p>奸商抽中【三等奖】</p>
	</marquee>

<script>
(function($){
	var list = $('content').children, len = list.length, begin = $('begin'), index = 0, interval = null;

	begin.onclick = function(){
		if(this.running)return;
		this.running = true;
		this.remain = 3000 + Math.random() * 5000;
		interval = setInterval(function(){
			if( begin.remain < 200 ){
				begin.running = false;
				alert( '你抽中了: '+list[index].innerHTML );
				clearInterval(interval);
			}else{
				list[index].className = "";
				list[(index+1) % len].className = "current";
				index = ++index % len;
				begin.remain -= 100;
			}
		},100);
	};

	var mm = 3;
	
	window.fn = function(){
		alert(mm);
	};	
	mm += 3;
	
})(function(id){return document.getElementById(id)});

</script>
</body>
</html>
